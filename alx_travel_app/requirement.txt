## alx_travel_app Requirements

### Step-by-Step Setup Guide for Django Project

Below is a complete guide to set up the Django project `alx_travel_app` with the `listings` app, install the required dependencies, configure the database (using SQLite as default for simplicity; you can switch to PostgreSQL later), and integrate Swagger (via `drf-yasg`) for API documentation. I'll include all necessary commands and code snippets.

#### Prerequisites
- Python 3.8+ installed.
- pip and virtualenv installed (`pip install virtualenv` if needed).
- For RabbitMQ (Celery broker): Install RabbitMQ server separately (not via pip). On Ubuntu: `sudo apt update && sudo apt install rabbitmq-server`. On macOS: `brew install rabbitmq`. Start it with `sudo systemctl start rabbitmq-server` (Linux) or `brew services start rabbitmq` (macOS). Enable the management plugin if needed: `rabbitmq-plugins enable rabbitmq_management`.

#### 1. Create a Virtual Environment and Install Dependencies
Create a project directory and virtual environment to isolate dependencies.

```bash
mkdir alx_travel_app_project
cd alx_travel_app_project
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install --upgrade pip
```

Install the packages:
```bash
pip install django djangorestframework django-cors-headers celery drf-yasg
```
- `django`: Core framework.
- `djangorestframework`: For building REST APIs.
- `django-cors-headers`: For handling CORS in API requests.
- `celery`: For asynchronous task processing (uses RabbitMQ as broker).
- `drf-yasg`: For Swagger/OpenAPI documentation.

Save dependencies to `requirements.txt`:
```bash
pip freeze > requirements.txt
```

#### 2. Create the Django Project and App
```bash
django-admin startproject alx_travel_app .
python manage.py startapp listings
```

Your project structure should now look like:
```
alx_travel_app_project/
├── venv/
├── alx_travel_app/
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── listings/
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations/
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── manage.py
└── requirements.txt
```

#### 3. Configure the Database
Django uses SQLite by default (no extra setup needed). If you prefer PostgreSQL:
- Install: `pip install psycopg2-binary`.
- Update `settings.py` (see below).

Edit `alx_travel_app/settings.py` to add apps and basic configs. Here's the updated sections:

```python
# alx_travel_app/settings.py

import os
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = 'your-secret-key-here'  # Generate a real one: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'

DEBUG = True

ALLOWED_HOSTS = ['localhost', '127.0.0.1']

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',  # DRF
    'corsheaders',     # CORS
    'drf_yasg',        # Swagger
    'listings',        # Your app
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',  # Add CORS middleware
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'alx_travel_app.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'alx_travel_app.wsgi.application'

# Database (SQLite default)
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# For PostgreSQL (optional - replace above):
# DATABASES = {
#     'default': {
#         'ENGINE': 'django.db.backends.postgresql',
#         'NAME': 'alx_travel_db',
#         'USER': 'your_db_user',
#         'PASSWORD': 'your_db_password',
#         'HOST': 'localhost',
#         'PORT': '5432',
#     }
# }

# Password validation
# ... (default Django settings)

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

STATIC_URL = 'static/'
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# DRF Settings
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.AllowAny',  # Adjust as needed
    ],
    'DEFAULT_RENDERER_CLASSES': [
        'rest_framework.renderers.JSONRenderer',
    ],
}

# CORS Settings (allow all origins for development)
CORS_ALLOW_ALL_ORIGINS = True  # Set to False in production; specify CORS_ALLOWED_ORIGINS instead

# Celery Settings
CELERY_BROKER_URL = 'amqp://localhost:5672'  # RabbitMQ default
CELERY_RESULT_BACKEND = 'rpc://'
CELERY_ACCEPT_CONTENT = ['json']
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_TIMEZONE = 'UTC'

# Swagger Settings (optional customizations)
SWAGGER_SETTINGS = {
    'USE_SESSION_AUTH': False,
    'SECURITY_DEFINITIONS': {
        'api_key': {
            'type': 'apiKey',
            'in': 'header',
            'name': 'Authorization',
        },
    },
}
```

Run migrations to set up the database:
```bash
python manage.py makemigrations
python manage.py migrate
```

#### 4. Configure URLs for the Project and Swagger
Edit `alx_travel_app/urls.py` to include Swagger and app URLs:

```python
# alx_travel_app/urls.py

from django.contrib import admin
from django.urls import path, include, re_path
from rest_framework import permissions
from drf_yasg.views import get_schema_view
from drf_yasg import openapi

schema_view = get_schema_view(
    openapi.Info(
        title="ALX Travel App API",
        default_version='v1',
        description="API for travel listings",
        terms_of_service="https://www.example.com/terms/",
        contact=openapi.Contact(email="contact@example.com"),
        license=openapi.License(name="MIT License"),
    ),
    public=True,
    permission_classes=[permissions.AllowAny],
)

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('listings.urls')),  # Your app's API URLs
    re_path(r'^swagger(?P<format>\.json|\.yaml)$', schema_view.without_ui(cache_timeout=0), name='schema-json'),
    path('swagger/', schema_view.with_ui('swagger', cache_timeout=0), name='schema-swagger-ui'),
    path('redoc/', schema_view.with_ui('redoc', cache_timeout=0), name='schema-redoc'),
]
```

Create `listings/urls.py` for the app (basic placeholder):
```python
# listings/urls.py

from django.urls import path
# Import your views here later

urlpatterns = [
    # Add your API endpoints here, e.g., path('listings/', views.ListingList.as_view()),
]
```

#### 5. Set Up Celery
Create `celery.py` in the project root (`alx_travel_app/celery.py`):

```python
# alx_travel_app/celery.py

import os
from celery import Celery

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'alx_travel_app.settings')

app = Celery('alx_travel_app')
app.config_from_object('django.conf:settings', namespace='CELERY')
app.autodiscover_tasks()
```

Update `alx_travel_app/__init__.py`:
```python
# alx_travel_app/__init__.py

from .celery import app as celery_app

__all__ = ('celery_app',)
```

To run Celery (in a separate terminal):
```bash
celery -A alx_travel_app worker -l info
```

For Celery beat (scheduled tasks, if needed):
```bash
celery -A alx_travel_app beat -l info
```

#### 6. Test the Setup
- Create a superuser: `python manage.py createsuperuser`
- Run the server: `python manage.py runserver`
- Visit http://127.0.0.1:8000/swagger/ to see Swagger docs (empty for now; add views to populate).
- Admin: http://127.0.0.1:8000/admin/
- CORS test: Use a frontend tool like Postman to hit `/api/` endpoints.

#### Next Steps
- Add models/views/serializers in `listings/` for actual functionality (e.g., travel listings).
- For production: Secure SECRET_KEY, set DEBUG=False, configure allowed CORS origins, use environment variables (e.g., via `python-decouple`).
- If switching to PostgreSQL: Create a DB, update credentials, and run migrations.
